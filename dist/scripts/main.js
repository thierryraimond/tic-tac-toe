function Joueur(e,t,r){this.nom=e,this.couleur=t,this.symbole=r}function Grille(e){this.nbCaseCote=e,this.matrice=new Array}function Partie(e,t,r){this.nbTour=1,this.joueurActif=e,this.adversaire=t,this.grille=r}function calculCoord(e,t){var r,i,o=e%t,s=e/t;return 0!=e?(i=o-1,r=parseInt(s),0===o&&(r--,i=t-1)):(r=0,i=0),{x:r,y:i}}Grille.prototype.genererVide=function(){for(var e=1,t=0;t<this.nbCaseCote;t++){this.matrice[t]=new Array,$("#grille").append('<div id="row'+(t+1)+'" class="row"></div>');for(var r=0;r<this.nbCaseCote;r++)this.matrice[t][r]="",$("#row"+(t+1)).append('<div id="case'+e+++'" class="col-xs-1 case vide">&nbsp</div>')}},Partie.prototype.changerTour=function(){var e=this.joueurActif;this.joueurActif=this.adversaire,this.adversaire=e,this.nbTour++,$("#nomJoueurActif").html(this.joueurActif.nom).css("color",this.joueurActif.couleur)},Partie.prototype.chercheGagnant=function(){for(var e=0,t=0,r=0,i=0,o=this.grille.nbCaseCote-1,s=0;s<this.grille.nbCaseCote;s++){this.grille.matrice[s][s]===this.joueurActif.symbole&&r++,this.grille.matrice[s][o--]===this.joueurActif.symbole&&i++;for(var u=0;u<this.grille.nbCaseCote;u++)this.grille.matrice[s][u]===this.joueurActif.symbole&&e++,this.grille.matrice[u][s]===this.joueurActif.symbole&&t++;if(e===this.grille.nbCaseCote||t===this.grille.nbCaseCote)return!0;e=0,t=0}return r===this.grille.nbCaseCote||i===this.grille.nbCaseCote},Partie.prototype.estTerminee=function(){return this.nbTour===this.grille.nbCaseCote*this.grille.nbCaseCote},$(function(){var e=new Joueur("","red","X"),t=new Joueur("","green","O"),r=new Grille(3);r.genererVide();var i,o,s,u=new Partie(e,t,r);$("#formNomJoueur").submit("click",function(r){r.preventDefault();var i=$.trim($("#inputJoueur1Nom").val()),o=$.trim($("#inputJoueur2Nom").val());i===o||0===i.length||0===o.length?$("#erreurNomJoueur").html("Un nom de joueur est vide ou les deux noms sont identiques. Veuillez corriger.").show("slow").delay(1e4).hide("slow"):(e.nom=i,t.nom=o,$("#textDebutJeu").html("<h1>Que la partie commence "+e.nom+", et "+t.nom+"</h1>"),$("#nomJoueurActif").html(u.joueurActif.nom).css("color",u.joueurActif.couleur),$("#formNomJoueur").hide("slow"),$("#jeu").show("slow"))}),$("#grille .col-xs-1").on("click",function(){numCase=parseInt($(this).attr("id").replace("case","")),i=calculCoord(numCase,r.nbCaseCote),o=i.x,s=i.y,"&nbsp;"==$("#"+this.id).html()&&($("#"+this.id).html(u.joueurActif.symbole).css("color",u.joueurActif.couleur),r.matrice[o][s]=u.joueurActif.symbole,u.chercheGagnant()?($("#grille .col-xs-1").off(),$("#info").html(u.joueurActif.nom+" a gagné !!!")):u.estTerminee()?($("#grille .col-xs-1").off(),$("#info").html("Le jeu est terminé")):u.changerTour())})});